<section class="product-list">
  <div
    class="product-card"
    *ngFor="let product of filteredProducts"
    (click)="navigateToProduct(product.id)"
    role="button"
    tabindex="0"
    (keydown.enter)="navigateToProduct(product.id)"
    (keydown.space)="navigateToProduct(product.id)"
    [class.selected]="isProductSelected(product.id)"
  >
    <div
      *ngIf="isAdminMode"
      class="selection-checkbox"
      (click)="toggleProductSelection(product.id); $event.stopPropagation()"
    >
      <input
        type="checkbox"
        [checked]="isProductSelected(product.id)"
        (change)="toggleProductSelection(product.id)"
      />
    </div>

    <img [src]="product.image" [alt]="product.name" />

    <div class="product-info">
      <h3>{{ product.name }}</h3>
      <p class="price">
        {{ product.price | currency : "BRL" : "symbol" : "1.2-2" : "pt-BR" }}
      </p>
      <p class="category">Categoria: {{ product.category }}</p>
      <p class="description">{{ product.description }}</p>

      <div class="product-meta" *ngIf="product.rating && product.reviews">
        <span class="rating">⭐ {{ product.rating }}/5</span>
        <span class="reviews">({{ product.reviews }} avaliações)</span>
      </div>

      <div class="stock-info" *ngIf="product.stock">
        <span class="stock" [class.low-stock]="product.stock < 10">
          {{ product.stock }} em estoque
        </span>
      </div>
    </div>

    <div *ngIf="isAdminMode" class="admin-actions">
      <button
        class="edit-btn"
        (click)="editProduct(product, $event)"
        title="Editar produto"
      >
        <ng-icon name="myna-edit-one"></ng-icon>
      </button>
      <button
        class="view-btn"
        (click)="navigateToProduct(product.id); $event.stopPropagation()"
        title="Ver detalhes"
      >
        <ng-icon name="hero-eye"></ng-icon>
      </button>
    </div>
  </div>

  <div class="no-products" *ngIf="filteredProducts.length === 0">
    <h3>Nenhum produto encontrado</h3>
    <p>Tente ajustar os filtros ou adicione novos produtos.</p>
  </div>
</section>
