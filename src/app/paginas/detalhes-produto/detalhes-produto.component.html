<div class="produto-container" *ngIf="produto as p">
  <div class="breadcrumb">
    <button class="voltar-btn" (click)="voltar()">← Voltar</button>
  </div>

  <div class="detalhes-produto">
    <div class="imagem-produto">
      <img [src]="p.imagem" [alt]="p.nome" />
    </div>

    <div class="info-produto">
      <div class="categoria">{{ p.categoria }}</div>
      <h1>{{ p.nome }}</h1>

      <div class="preco">
        <span class="valor">R$: {{ p.preco }}</span>
        <span class="parcelas">
          ou 3x de R$ {{ p.preco ? p.preco / 3 : 0 }} sem juros
        </span>
      </div>

      <div class="descricao">
        <p>{{ p.descricao }}</p>
      </div>

      <div class="especificacoes" *ngIf="p.especificacoes?.length">
        <h3>Especificações</h3>
        <ul>
          <li *ngFor="let item of p.especificacoes">{{ item }}</li>
        </ul>
      </div>

      <div class="estoque-info">
        <span class="estoque" [class.baixo]="(p.estoque ?? 0) < 10">
          {{ p.estoque ?? 0 }} unidades disponíveis
        </span>
      </div>

      <div class="quantidade-container">
        <label for="quantidade">Quantidade:</label>
        <div class="controle-quantidade">
          <button
            type="button"
            class="btn-quantidade"
            (click)="diminuirQuantidade()"
            [disabled]="quantidade <= 1"
          >
            -
          </button>
          <input
            id="quantidade"
            type="number"
            [(ngModel)]="quantidade"
            min="1"
            [max]="p.estoque ?? 999"
            class="input-quantidade"
          />
          <button
            type="button"
            class="btn-quantidade"
            (click)="aumentarQuantidade()"
            [disabled]="p.estoque ? quantidade >= p.estoque : false"
          >
            +
          </button>
        </div>
      </div>

      <div class="botoes">
        <button
          class="btn-add"
          (click)="adicionarNoCarrinho()"
          [disabled]="adicionando || !p.id"
        >
          {{ adicionando ? "Adicionando..." : "Adicionar ao Carrinho" }}
        </button>
        <button class="btn-comprar">Comprar Agora</button>
      </div>
    </div>
  </div>
</div>

<div class="nao-encontrado" *ngIf="!produto">
  <h2>Produto não encontrado</h2>
  <button class="voltar-btn" (click)="voltar()">← Voltar aos produtos</button>
</div>
